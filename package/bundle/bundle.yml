---
### Bundle

name    : ecwam-bundle
version : 0.0.0
cmake   : CMAKE_LINK_DEPENDS_NO_SHARED=ON
          ENABLE_OMP=ON
          ENABLE_SINGLE_PRECISION=OFF
          ENABLE_ACC=OFF 


projects :

    - ecbuild : 
        git     : https://github.com/ecmwf/ecbuild
        version : master
        bundle  : false

    - eccodes :
        git     : https://github.com/ecmwf/eccodes
        version : master
        cmake   : ENABLE_MEMFS=ON

    - fiat :
        git     : https://github.com/ecmwf-ifs/fiat 
        version : main 

    - field_api :
        git     : https://github.com/ecmwf-ifs/field_api.git
        version : v0.2.2
        cmake   : >
            ENABLE_SINGLE_PRECISION=OFF

    - loki :
        git     : https://github.com/ecmwf-ifs/loki
        version : main
        optional: true
        require : ecbuild
        cmake   : >
            LOKI_ENABLE_TESTS=OFF
            LOKI_ENABLE_NO_INSTALL=ON

    - ecwam :
        dir     : $PWD
        require : fiat 

options :

    - with-single-precision :
        help  : Enable single precision build of the dwarf
        cmake : ENABLE_SINGLE_PRECISION=ON ENABLE_DOUBLE_PRECISION=OFF

    - without-mpi :
        help  : Disable MPI
        cmake : ENABLE_MPI=OFF

    - without-omp :
        help  : Disable OpenMP
        cmake : ENABLE_OMP=OFF

    - with-loki :
        help  : Enable Loki source-to-source transformations for ecWam physics
        cmake : >
            ENABLE_WAM_LOKI=ON
            LOKI_ENABLE_NO_INSTALL=OFF

    - with-acc :
        help  : Enable GPU offload using OpenACC
        cmake : >
            ENABLE_ACC=ON

    - without-loki-install :
        help  : Skip installation of Loki (Requires Loki to be on the PATH)
        cmake : >
            LOKI_ENABLE_NO_INSTALL=ON
            LOKI_ENABLE_CLAW=OFF

    - loki-frontend :
        help  : Frontend parser to use for Loki transformations
        cmake : LOKI_FRONTEND={{value}}
